!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function($){function Slidizle(e,i){this.settings={classes:{content:"slidizle-content",next:"slidizle-next",previous:"slidizle-previous",beforeActive:"before-active",afterActive:"after-active",nextActive:"next",previousActive:"previous",forward:"forward",backward:"backward",navigation:"slidizle-navigation",timer:"slidizle-timer",slide:"slidizle-slide",disabled:"disabled",first:"first",last:"last",play:"played",pause:"paused",stop:"stoped",slider:"slidizle",active:"active",loading:"loading"},timeout:null,pauseOnHover:!1,nextOnClick:!1,loop:!1,autoPlay:!0,keyboardEnabled:!0,touchEnabled:!0,loadBeforeTransition:!0,disabled:!1,onInit:null,onClick:null,beforeChange:null,onChange:null,afterChange:null,beforeLoading:null,onLoading:null,afterLoading:null,onNext:null,onPrevious:null,onPlay:null,onPause:null,onResume:null},this.$refs={slider:null,content:null,medias:null,nextSlide:null,previousSlide:null,currentSlide:null,beforeActiveSlides:null,afterActiveSlides:null,navigation:null,next:null,previous:null,current:null,timer:null},this.loadingProgress=0,this.current_timeout_time=0,this._internalTimer=null,this.timeout=null,this.previous_index=0,this.current_index=0,this.next_index=0,this._previous_active_index=0,this._isPlaying=!1,this._isPause=!1,this._isOver=!1,this.total=0,this.$this=$(e),this.clickEvent=navigator.userAgent.match(/mobile/gi)?"touchend":"click",this.init($(e),i)}return Slidizle.prototype.init=function(e,i){var t=this,s=e;s.hasClass(t.settings.classes.slider)||s.addClass(t.settings.classes.slider),t._extendSettings(i),t.$refs.slider=s,t.$refs.content=s.find("[data-slidizle-content]").filter(function(){return $(this).closest("[data-slidizle]").get(0)==t.$this.get(0)}),t.$refs.navigation=s.find("[data-slidizle-navigation]").filter(function(){return $(this).closest("[data-slidizle]").get(0)==t.$this.get(0)}),t.$refs.previous=s.find("[data-slidizle-previous]").filter(function(){return $(this).closest("[data-slidizle]").get(0)==t.$this.get(0)}),t.$refs.next=s.find("[data-slidizle-next]").filter(function(){return $(this).closest("[data-slidizle]").get(0)==t.$this.get(0)}),t.$refs.timer=s.find("[data-slidizle-timer]").filter(function(){return $(this).closest("[data-slidizle]").get(0)==t.$this.get(0)}),t.$refs.content&&t.$refs.content.addClass(t.settings.classes.content),t.$refs.next&&t.$refs.next.addClass(t.settings.classes.next),t.$refs.previous&&t.$refs.previous.addClass(t.settings.classes.previous),t.$refs.navigation&&t.$refs.navigation.addClass(t.settings.classes.navigation),t.$refs.timer&&t.$refs.timer.addClass(t.settings.classes.timer);var n=t.$refs.content.children(":first-child");if(n.length>0){var r=n[0].nodeName.toLowerCase();t.$refs.medias=t.$refs.content.children(r)}if(s.addClass(t.settings.classes.slider),t.$refs.medias.filter(":first-child").addClass(t.settings.classes.first),t.$refs.medias.filter(":last-child").addClass(t.settings.classes.last),t.$refs.medias){t.$refs.medias.addClass(t.settings.classes.slide),t.$refs.medias.bind(t.clickEvent,function(e){s.trigger("slidizle.click",[t]),t.settings.onClick&&t.settings.onClick(t)}),t.total=t.$refs.medias.length,t.current_index=0,t.$refs.navigation.length>=1&&t._initNavigation(),t.initPreviousNextNavigation();var l=t.$refs.medias.filter(".active:first");l.length>=1&&(t.current_index=l.index()),t._updateSlidesRefs(),t.settings.pauseOnHover&&s.hover(function(e){t._isOver=!0,t.pause()},function(e){t._isOver=!1,t.resume()}),t.settings.keyboardEnabled&&"false"!=t.settings.keyboardEnabled&&t._initKeyboardNavigation(),t.settings.touchEnabled&&navigator.userAgent.match(/mobile/gi)&&t._initTouchNavigation(),t.settings.autoPlay&&t.$refs.medias.length>1&&t.play(),t.settings.nextOnClick&&t.$refs.content.bind("click",function(){t.next()}),t.settings.onInit&&t.settings.onInit(t),s.trigger("slidizle.init",[t]),t.$this.addClass(t.settings.classes.forward),t._changeMedias()}else t.settings.onInit&&t.settings.onInit(t),s.trigger("slidizle.init",[t])},Slidizle.prototype._initNavigation=function(){var e=this;if(e.$this,!e.$refs.navigation)return!1;if(e.total<=1&&e.$refs.navigation.hide(),e.$refs.navigation.children().length<=0)for(var i=e.$refs.navigation[0].nodeName.toLowerCase(),t="dl"==i?"dt":"ol"==i?"li":"ul"==i?"li":"div",s=0;s<e.total;s++)e.$refs.navigation.append("<a><"+t+">"+(s+1)+"</"+t+"></a>");e.$refs.navigation.children().bind(e.clickEvent,function(i){var t=$(this),s=t.attr("data-slidizle-slide-id"),n=e.$refs.medias.filter('[data-slidizle-slide-id="'+s+'"]');if(e.previous_index=e.current_index,s&&n){var r=n.index();r!=e.current_index&&(e.current_index=r,e._changeMedias())}else $(this).index()!=e.current_index&&(e.current_index=$(this).index(),e._changeMedias());i.preventDefault()})},Slidizle.prototype._initKeyboardNavigation=function(){var e=this;e.$this,$(document).bind("keyup",function(i){switch(i.keyCode){case 39:e.next();break;case 37:e.previous()}})},Slidizle.prototype._initTouchNavigation=function(){var e,i,t=this;t.$this,$(document).bind("touchstart",function(t){e=t.originalEvent.touches[0].clientX,i=t.originalEvent.touches[0].clientY}),$(document).bind("touchmove",function(s){if(e&&i){var n=s.originalEvent.touches[0].clientX,r=s.originalEvent.touches[0].clientY,l=e-n,a=i-r;Math.abs(l)>Math.abs(a)&&(l>0?t.next():t.previous()),e=i=null}})},Slidizle.prototype.initPreviousNextNavigation=function(){var e=this;e.$this,e.$refs.previous&&(e.total>1&&e.$refs.previous.bind(e.clickEvent,function(){e.previous()}),e.total<=1&&e.$refs.previous.hide()),e.$refs.next&&(e.total>1&&e.$refs.next.bind(e.clickEvent,function(){e.next()}),e.total<=1&&e.$refs.next.hide())},Slidizle.prototype._pauseTimer=function(){var e=this;clearInterval(e._internalTimer)},Slidizle.prototype._stopTimer=function(){var e=this;clearInterval(e._internalTimer),e._resetTimer()},Slidizle.prototype._resetTimer=function(){var e=this;e.current_timeout_time=e.$refs.currentSlide.data("slidizle-timeout")||e.settings.timeout,e.total_timeout_time=e.$refs.currentSlide.data("slidizle-timeout")||e.settings.timeout},Slidizle.prototype._startTimer=function(){var e=this;e.$this,clearInterval(e._internalTimer),e._internalTimer=setInterval(function(){e.current_timeout_time-=10,e.current_timeout_time<=0&&e.next()},10)},Slidizle.prototype._changeMedias=function(){function e(){i.$refs.previousActiveSlide&&i.$this.removeClass("slide-"+i.$refs.previousActiveSlide.index()),i.$this.addClass("slide-"+i.$refs.currentSlide.index()),i.isLast()?i.$this.addClass(i.settings.classes.last):i.$this.removeClass(i.settings.classes.last),i.isFirst()?i.$this.addClass(i.settings.classes.first):i.$this.removeClass(i.settings.classes.first),i.$refs.previousActiveSlide&&i.$this.removeClass("loaded-slide-"+i.$refs.previousActiveSlide.index()),i.$this.addClass("loaded-slide-"+i.$refs.currentSlide.index()),i.$refs.medias.removeClass(i.settings.classes.active),i.$refs.currentSlide.addClass(i.settings.classes.active),i.$refs.medias.removeClass(i.settings.classes.beforeActive).removeClass(i.settings.classes.afterActive),i.getBeforeActiveSlides().addClass(i.settings.classes.beforeActive),i.getAfterActiveSlides().addClass(i.settings.classes.afterActive),i.$refs.medias.removeClass(i.settings.classes.previousActive).removeClass(i.settings.classes.nextActive),i.getPreviousSlide().addClass(i.settings.classes.previousActive),i.getNextSlide().addClass(i.settings.classes.nextActive),i.settings.onChange&&i.settings.onChange(i),t.trigger("slidizle.change",[i]),0==i.$refs.currentSlide.index()&&i.$refs.previousSlide?i.$refs.previousSlide.index()==i.$refs.medias.length-1?(i.settings.onNext&&i.settings.onNext(i),t.trigger("slidizle.next",[i])):(i.settings.onPrevious&&i.settings.onPrevious(i),t.trigger("slidizle.previous",[i])):i.$refs.currentSlide.index()==i.$refs.medias.length-1&&i.$refs.previousSlide?0==i.$refs.previousSlide.index()?(i.settings.onPrevious&&i.settings.onPrevious(i),t.trigger("slidizle.previous",[i])):(i.settings.onNext&&i.settings.onNext(i),t.trigger("slidizle.next",[i])):i.$refs.previousSlide?i.$refs.currentSlide.index()>i.$refs.previousSlide.index()?(i.settings.onNext&&i.settings.onNext(i),t.trigger("slidizle.next",[i])):(i.settings.onPrevious&&i.settings.onPrevious(i),t.trigger("slidizle.previous",[i])):(i.settings.onNext&&i.settings.onNext(i),t.trigger("slidizle.next",[i])),i.getTotalTimeout()&&!i._isOver&&i.isPlay()&&i._startTimer(),i.settings.afterChange&&i.settings.afterChange(i),t.trigger("slidizle.afterChange",[i])}var i=this,t=i.$this,s=i.settings.classes.disabled;i._updateSlidesRefs(),i.settings.beforeChange&&i.settings.beforeChange(i),t.trigger("slidizle.beforeChange",[i]),i._stopTimer(),i.$refs.next&&(i.isLast()&&!i.isLoop()?i.$refs.next.addClass(s):i.$refs.next.hasClass(s)&&i.$refs.next.removeClass(s)),i.$refs.previous&&(i.$refs.previous&&i.isFirst()&&!i.isLoop()?i.$refs.previous.addClass(s):i.$refs.previous.hasClass(s)&&i.$refs.previous.removeClass(s));var n=i.$refs.currentSlide.attr("data-slidizle-slide-id");i.$refs.navigation.each(function(){var e=$(this),t=$(this).children('[data-slidizle-slide-id="'+n+'"]');n&&t?(e.children().removeClass(i.settings.classes.active),t.addClass(i.settings.classes.active)):(e.children().removeClass(i.settings.classes.active),e.children(":eq("+i.current_index+")").addClass(i.settings.classes.active))}),i.$refs.slider.addClass(i.settings.classes.loading),i.$refs.currentSlide.addClass(i.settings.classes.loading),i.settings.loadBeforeTransition&&"false"!=i.settings.loadBeforeTransition?(i.settings.beforeLoading&&i.settings.beforeLoading(i),t.trigger("slidizle.beforeLoading",[i]),i._loadSlide(i.$refs.currentSlide,function(s){s.removeClass(i.settings.classes.loading),i.$refs.slider.removeClass(i.settings.classes.loading),i.settings.afterLoading&&i.settings.afterLoading(i),t.trigger("slidizle.afterLoading",[i]),e()})):e()},Slidizle.prototype._updateSlidesRefs=function(){var e=this,i=(e.$this,e.current_index||0),t=e.next_index||e.current_index+1<e.total?e.current_index+1:0,s=e.previous_index||e.current_index-1>=0?e.current_index-1:e.total-1;e.$refs.currentSlide&&(e.$refs.previousActiveSlide=e.$refs.currentSlide),e.$refs.previousSlide=e.$refs.content.children(":eq("+s+")"),e.$refs.currentSlide=e.$refs.content.children(":eq("+i+")"),e.$refs.nextSlide=e.$refs.content.children(":eq("+t+")"),e.$refs.beforeActiveSlides=e.$refs.medias.filter(":lt("+i+")"),e.$refs.afterActiveSlides=e.$refs.medias.filter(":gt("+i+")")},Slidizle.prototype._loadSlide=function(e,i){function t(){a++,s.loadingProgress=100/l.length*a,s.settings.onLoading&&s.settings.onLoading(s),n.trigger("slidizle.onLoading",[s]),a>=l.length&&i(r)}var s=this,n=s.$this,r=$(e),l=[],a=0,o=r.find("*:not(script)").filter(function(){return $(this).closest("[data-slidizle]").get(0)==s.$this.get(0)});return o=o.add(r),o.each(function(){var e,i=$(this);if("undefined"!=typeof i.attr("data-slidizle-preload-custom")&&i.attr("data-slidizle-preload-custom")!==!1)return void l.push({type:"custom",$elm:i});if(i.css("background-image").indexOf("none")==-1){var t=i.css("background-image");if(t.indexOf("url")!=-1){var s=t.match(/url\((.*?)\)/);e=s[1].replace(/\"/g,"")}}else"img"==i.get(0).nodeName.toLowerCase()&&"undefined"!=typeof i.attr("src")&&(e=i.attr("src"));e&&l.push({type:"image",url:e})}),l.length?($(l).each(function(e,i){switch(i.type){case"image":var s=new Image;$(s).load(function(){t()}).error(function(){t()}).attr("src",i.url);break;case"custom":i.$elm.bind("slidizle.loaded",function(e){t()})}}),void(s.loadingProgress=0)):void i(r)},Slidizle.prototype.play=function(){var e=this,i=e.$this;e.isDisabled()||!e._isPlaying&&e.getTotalTimeout()&&e.$refs.medias.length&&(e.$this.removeClass(e.settings.classes.pause),e.$this.removeClass(e.settings.classes.stop),e.$this.addClass(e.settings.classes.play),e._isPause=!1,e._isPlaying=!0,e._resetTimer(),e._startTimer(),e.settings.onPlay&&e.settings.onPlay(e),i.trigger("slidizle.play",[e]))},Slidizle.prototype.resume=function(){var e=this,i=e.$this;e.isDisabled()||e.isPause()&&(e.$this.removeClass(e.settings.classes.pause),e.$this.removeClass(e.settings.classes.stop),e.$this.addClass(e.settings.classes.play),e._startTimer(),e._isPause=!1,e._isPlaying=!0,e.settings.onResume&&e.settings.onResume(e),i.trigger("slidizle.resume",[e]))},Slidizle.prototype.pause=function(){var e=this,i=e.$this;e.isDisabled()||e.isPlay()&&(e.$this.removeClass(e.settings.classes.play),e.$this.removeClass(e.settings.classes.stop),e._isPause=!0,e._isPlaying=!1,e._pauseTimer(),e.$this.addClass(e.settings.classes.pause),e.settings.onPause&&e.settings.onPause(e),i.trigger("slidizle.pause",[e]))},Slidizle.prototype.stop=function(){var e=this,i=e.$this;e.isDisabled()||e.isPlay()&&(e.$this.removeClass(e.settings.classes.play),e.$this.removeClass(e.settings.classes.pause),e._isPause=!1,e._isPlaying=!1,e._stopTimer(),e.$this.addClass(e.settings.classes.stop),e.settings.onStop&&e.settings.onStop(e),i.trigger("slidizle.stop",[e]))},Slidizle.prototype.togglePlayPause=function(){var e=this;e.$this,e.isDisabled()||(e._isPlaying?e.pause():e.play())},Slidizle.prototype.next=function(){var e=this;e.$this,e.settings.classes.disabled,e.isDisabled()||!e.isLoop()&&e.isLast()||(e.$this.removeClass(e.settings.classes.backward),e.$this.addClass(e.settings.classes.forward),e._previous_active_index=e.current_index,e.current_index=e.current_index+1<e.total?e.current_index+1:0,e.previous_index=e.current_index-1>=0?e.current_index-1:e.total-1,e.next_index=e.current_index+1<e.total?e.current_index+1:0,e._changeMedias())},Slidizle.prototype.previous=function(){var e=this;e.$this,e.isDisabled()||!e.isLoop()&&e.isFirst()||(e.$this.removeClass(e.settings.classes.forward),e.$this.addClass(e.settings.classes.backward),e._previous_active_index=e.current_index,e.current_index=e.current_index-1<0?e.total-1:e.current_index-1,e.previous_index=e.current_index-1>=0?e.current_index-1:e.total-1,e.next_index=e.current_index+1<e.total?e.current_index+1:0,e._changeMedias())},Slidizle.prototype.goto=function(e){var i=this,t=(i.$this,null);if(!i.isDisabled()){if("string"==typeof e)if("."==e.substr(0,1)||"#"==e.substr(0,1))t=i.$refs.content.children(e);else{var s=i.$refs.medias.filter('[data-slidizle-slide-id="'+e+'"]');1==s.length?t=s:1==i.$refs.medias.filter("#"+e).length&&(t=i.$refs.medias.filter("#"+e))}else"number"==typeof e&&(t=i.$refs.medias.filter(":eq("+e+")"));t&&null!=t.index()&&(i.current_index=t.index(),i._changeMedias())}},Slidizle.prototype.gotoAndPlay=function(e){this.isDisabled()||(this.gotoSlide(e),this.play())},Slidizle.prototype.gotoAndStop=function(e){this.isDisabled()||(this.gotoSlide(e),this.stop())},Slidizle.prototype.getCurrentSlide=function(){return this.$refs.currentSlide},Slidizle.prototype.getActiveSlide=Slidizle.prototype.getCurrentSlide,Slidizle.prototype.getPreviousSlide=function(){return this.$refs.previousSlide},Slidizle.prototype.getNextSlide=function(){return this.$refs.nextSlide},Slidizle.prototype.getBeforeActiveSlides=function(){return this.$refs.beforeActiveSlides},Slidizle.prototype.getAfterActiveSlides=function(){return this.$refs.afterActiveSlides},Slidizle.prototype.getPreviousActiveSlide=function(){return this.$refs.previousActiveSlide},Slidizle.prototype.getAllSlides=function(){return this.$refs.medias},Slidizle.prototype.getSettings=function(){return this.settings},Slidizle.prototype.getLoadingProgress=function(){return this.loadingProgress},Slidizle.prototype.getRemainingTimeout=function(){return this.current_timeout_time},Slidizle.prototype.getCurrentTimeout=function(){var e=this.$refs.currentSlide.data("slidizle-timeout")||this.settings.timeout;return e?e-this.current_timeout_time:null},Slidizle.prototype.getTotalTimeout=function(){return this.total_timeout_time||this.settings.timeout||!1},Slidizle.prototype.isLast=function(){return this.getCurrentSlide().index()>=this.getAllSlides().length-1},Slidizle.prototype.isFirst=function(){return this.getCurrentSlide().index()<=0},Slidizle.prototype.isHover=function(){return this._isOver},Slidizle.prototype.isDisabled=function(){var e=!1;return e="function"==typeof this.settings.disabled?this.settings.disabled():this.settings.disabled,e?this.$this.addClass(this.settings.classes.disabled):this.$this.removeClass(this.settings.classes.disabled),e},Slidizle.prototype.isLoop=function(){var e=this.settings.loop;return e&&"false"!=e},Slidizle.prototype.isPlay=function(){return this._isPlaying},Slidizle.prototype.isPause=function(){return this._isPause},Slidizle.prototype.isStop=function(){return!this._isPlaying&&!this._isPause},Slidizle.prototype._extendSettings=function(options){var _this=this,$this=_this.$this;_this.settings=$.extend(_this.settings,options,!0);var flattenObject=function(e){var i={};for(var t in e)if(e.hasOwnProperty(t))if("object"==typeof e[t]&&null!=e[t]){var s=flattenObject(e[t]);for(var n in s)s.hasOwnProperty(n)&&(i[t+"."+n]=s[n])}else i[t]=e[t];return i},flatSettings=flattenObject(_this.settings);for(var name in flatSettings){var inline_setting="slidizle-"+name.replace(".","-").replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),inline_attr=$this.data(inline_setting);"undefined"!=typeof inline_attr&&("number"==typeof inline_attr||"boolean"==typeof inline_attr?eval("_this.settings."+name+" = "+inline_attr):eval("_this.settings."+name+' = "'+inline_attr+'"'))}},$.fn.slidizle=function(e){if(Slidizle.prototype[e]){var i=Array.prototype.slice.call(arguments,1);this.each(function(){var t=$(this).data("slidizle_api");t[e].apply(t,i)})}else if("object"!=typeof e&&e)$.error("Method "+e+" does not exist on jQuery.slidizle");else{var i=Array.prototype.slice.call(arguments);this.each(function(){if($this=$(this),null==$this.data("slidizle_api")||""==$this.data("slidizle_api")){var e=new Slidizle($this,i[0]);$this.data("slidizle_api",e)}})}return this},Slidizle});